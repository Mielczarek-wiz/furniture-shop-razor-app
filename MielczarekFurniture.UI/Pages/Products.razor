@page "/"
@inherits ProductsBase

@if(Products == null)
{
    <DisplaySpinner/>
}
else
{
    <div>
        <button class="btn btn-success" @onclick="(() => AddProduct_Click())">Add product</button>
    </div>
    <hr class="mb-3"/>
    <div class="form-group">
        <label for="search">Search products</label>
        <input @onchange="onSearchChangedAsync" class="form-control" id="search" placeholder="Name.."/>
    </div>
    <hr class="mb-3"/>
    <h3 class="mb-5">Products 
        @if (!@Ascending)
        {
            <button @onclick = "() => onOrderChanged()"style="border:0; background:white"><span class="oi oi-arrow-bottom"></span></button>
        }
        else
        {
            <button @onclick = "() => onOrderChanged()" style="border:0; background:white"><span class="oi oi-arrow-top"></span></button>
        }
    </h3>
    var productCount = Products.Count();
     

    @if(productCount > 0)
    {

        @foreach(var prodGroup in GetGroupedProductsByProducer())
        {
            <h4>@GetProducerName(prodGroup)</h4>
            <div class="row mt-3">
                <DisplayProducts Products = "@prodGroup"></DisplayProducts>
            </div>
            <hr class="mb-3"/>
        }

    }
}
